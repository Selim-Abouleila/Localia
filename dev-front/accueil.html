<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Accueil - Localia</title>
  <link rel="stylesheet" href="html.css">
</head>
<body>
  <!-- En-t√™te de navigation -->
  <header>
    <nav>
      <ul>
        <li><a href="accueil.html" class="logo-link"><img src="images/logo.jpg" alt="Logo Localia" /></a></li>
        <li><a href="accueil.html">Accueil</a></li>
        <li><a href="about.html">√Ä propos</a></li>
        <li><a href="login.html" id="login-link">Se connecter</a></li>
        <li><a href="#" id="logout-link" style="display: none;">Se d√©connecter</a></li>
      </ul>
      <div class="dropdown-menu-wrapper" id="menu-droite" style="display: none;">
        <button class="dropdown-toggle">‚ãÆ</button>
        <div class="dropdown-content">
          <a href="panier.html">Consulter mon panier</a>
          <a href="historique.html">Consulter l'historique des commandes</a>
          <a href="admin.html" id="admin-page-link" style="display: none;">Acc√©der √† l‚Äôespace admin</a>
          <a href="#" id="admin-mode-link" style="display: none;">Passer en mode admin</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Bandeau admin -->
  <div id="admin-banner" style="display: none; background-color: #ffcc00; color: #333; text-align: center; padding: 10px; font-weight: bold;">
    üëë Bienvenue Admin üëë
  </div>

  <!-- Section principale (Hero) -->
  <section class="hero">
    <div class="hero-content">
      <h1>Des produits faits mains √©cologiques et durables</h1>
      <a href="produits.html" class="btn-primary">D√©couvrir nos produits</a>
    </div>
  </section>

  <!-- Section des partenaires -->
  <section class="partenaires">
    <h2>Nos Partenaires</h2>
    <p>Nos partenaires partagent notre engagement pour l'artisanat durable et respectueux de la nature.</p>
    <div class="partenaires-logos">
      <img src="images/logo bookers.webp" alt="Bookers" class="logo">
      <img src="images/logo hotels.png" alt="Leaf Hotels" class="logo">
      <img src="images/logo ecoliday.png" alt="Ecoliday" class="logo">
      <img src="images/logo naturloop.jpeg" alt="Naturloop" class="logo">
    </div>
  </section>

  <!-- Section s√©lection de produits -->
  <section class="produits-selection">
    <h2>Une large s√©lection de produits artisanaux et durables</h2>
    <p>D√©couvrez nos cr√©ations uniques fabriqu√©es √† la main, alliant esth√©tique et respect de l'environnement.</p>
    <div class="produits-cards">
      <div class="produit-card">
        <img src="images/Artisanat.png" alt="Artisanat textile">
        <div class="produit-card-content">
          <h3>Artisanat textile</h3>
        </div>
      </div>
      <div class="produit-card">
        <img src="images/ChatGPT Image 7 avr. 2025 √† 13_34_26.png" alt="D√©coration int√©rieure">
        <div class="produit-card-content">
          <h3>D√©coration int√©rieure</h3>
        </div>
      </div>
      <div class="produit-card">
        <img src="images/beautiful-still-life-with-herbal-medicine.jpg" alt="M√©decine">
        <div class="produit-card-content">
          <h3>M√©decine</h3>
        </div>
      </div>
    </div>
  </section>

  <!-- Section Explorer les produits -->
  <section class="explore-produits">
    <h2>Explorez nos produits faits main pour chaque pi√®ce de votre maison</h2>
    <p>Des cr√©ations artisanales pour ceux qui cherchent la simplicit√© et le respect de l'environnement.</p>
    <div class="explore-btns">
      <a href="produits.html" class="btn-primary">D√©couvrir nos produits</a>
    </div>
  </section>

  <!-- Section Certifications -->
  <section class="certifications">
    <h2>Nos certifications</h2>
    <p>Certifi√©s √©co-responsables, nous garantissons des produits respectueux de l'environnement √† chaque √©tape de leur cr√©ation.</p>
    <div class="certification-logos">
      <img src="images/Capture d‚Äô√©cran 2025-04-07 √† 14.43.45.png" alt="Green Energy" class="certification-logo">
      <img src="images/Capture d‚Äô√©cran 2025-04-07 √† 14.43.36.png" alt="100% Ecology" class="certification-logo">
      <img src="images/Capture d‚Äô√©cran 2025-04-07 √† 14.43.30.png" alt="Green Energy Seal" class="certification-logo">
    </div>
  </section>

  <!-- Section Contactez-nous -->
  <section class="contact">
    <div class="contact-form">
      <h2>Contactez-nous</h2>
      <p>Pour toute question ou demande, n'h√©sitez pas √† nous contacter. Nous sommes l√† pour vous aider.</p>
      <form action="#" method="POST">
        <label for="name">Nom</label>
        <input type="text" id="name" name="name" placeholder="Entrez votre nom" required>

        <label for="email">Email</label>
        <input type="email" id="email" name="email" placeholder="Entrez votre email" required>

        <label for="message">Message</label>
        <textarea id="message" name="message" rows="4" placeholder="√âcrivez votre message..." required></textarea>

        <div class="conditions">
          <input type="checkbox" id="conditions" required>
          <label for="conditions">J'accepte les Conditions G√©n√©rales*</label>
        </div>

        <button type="submit" class="btn-primary">Envoyer</button>
      </form>
    </div>

    <div class="contact-image">
      <img src="images/realistic-water-drop-with-ecosystem.jpg" alt="Image √©cologique">
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Localia. Tous droits r√©serv√©s.</p>
  </footer>

  <script>
    fetch('http://localhost:3000/api/user', { credentials: 'include' })
      .then(res => res.json())
      .then(data => {
  const loginLink = document.getElementById('login-link');
  const logoutLink = document.getElementById('logout-link');
  const menuDroite = document.getElementById('menu-droite');
  const adminModeLink = document.getElementById('admin-mode-link');
  const adminBanner = document.getElementById('admin-banner');
  const adminPageLink = document.getElementById('admin-page-link');

  if (data.connected) {
    if (loginLink) loginLink.style.display = 'none';
    if (logoutLink) logoutLink.style.display = 'inline-block';
    if (menuDroite) menuDroite.style.display = 'inline-block';

    if (data.user.role !== 'admin') {
      if (adminModeLink) adminModeLink.style.display = 'block';
    } else {
      if (adminBanner) adminBanner.style.display = 'block';
      if (adminPageLink) adminPageLink.style.display = 'block';
    }
  } else {
    if (loginLink) loginLink.style.display = 'inline-block';
    if (logoutLink) logoutLink.style.display = 'none';
    if (menuDroite) menuDroite.style.display = 'none';
  }
});

    const logoutLink = document.getElementById('logout-link');
    if (logoutLink) {
      logoutLink.addEventListener('click', async () => {
        await fetch('http://localhost:3000/api/logout', { credentials: 'include' });
        window.location.href = 'login.html';
      });
    }

    const adminModeLink = document.getElementById('admin-mode-link');
    if (adminModeLink) {
      adminModeLink.addEventListener('click', async () => {
        const code = prompt('Entrez le code admin pour passer en mode administrateur :');
        if (!code) return;

        const res = await fetch('http://localhost:3000/api/admin-mode', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'include',
          body: JSON.stringify({ code })
        });

        const data = await res.json();
        alert(data.message);

        if (data.success) {
          window.location.reload();
        }
      });
    }

    document.querySelector('.dropdown-toggle')?.addEventListener('click', () => {
      document.querySelector('.dropdown-content').classList.toggle('active');
    });
  </script>

</body>
</html>
